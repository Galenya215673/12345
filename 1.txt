import sympy as sp

def calculate_derivative(function_str):
    """
    Функция для вычисления дифференциала (первой производной) заданной функции.
    
    :param function_str: строка с функцией (например, 'x**3 + 2*x**2 + 3*x + 4').
    :return: кортеж с исходной функцией и её первой производной.
    """
    x = sp.symbols('x')
    
    try:
        # Преобразование строки в выражени SymPy
        func_expr = sp.sympify(function_str)
        
        # Первая производная функции
        derivative = sp.diff(func_expr, x)
        
        return func_expr, derivative
    
    except Exception as e:
        print(f"Ошибка при обработке функции: {e}")
        return None, None

if __name__ == "__main__":
    # Запрашиваем функцию у пользователя
    user_input = input("Введите функцию для вычисления её дифференциала: ")
    
    original_func, diff_result = calculate_derivative(user_input)
    
    if original_func and diff_result:
        # Вывод результатов
        print("\nИсходная функция:", original_func)
        print("Производная (дифференциал):Давай внесём небольшие улучшения в старый код, сохранив его структуру, но сделав некоторые важные улучшения.