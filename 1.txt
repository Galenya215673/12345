import sympy as sp

def calculate_derivative(function_str):
    """
    Функция для вычисления дифференциала (производной) заданной функции.
    
    :param function_str: Строка, представляющая функцию (например, 'x**3 + 2*x**2 + 3*x + 4').
    :return: Исходная функция и её первая производная.
    """
    # Создаем символическую переменную
    x = sp.symbols('x')
    
    try:
        # Преобразуем строку в выражение SymPy
        func_expr = sp.sympify(function_str)
        
        # Вычисляем первую производную функции
        derivative = sp.diff(func_expr, x)
        
        return {
            "original_function": func_expr,
            "derivative": derivative
        }
    
    except Exception as e:
        print(f"Произошла ошибка: {e}")
        return None


if __name__ == "__main__":
    # Запрашиваем ввод функции у пользователя
    user_input = input("Введите функцию для нахождения её дифференциала: ")
    
    result = calculate_derivative(user_input)
    
    if result is not None:
        # Выводим результаты
        print("\nИсходная функция:", result["original_function"])
        print("Первая производная (дифференциал):", result["derivative"], "\n")